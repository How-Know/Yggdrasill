# 20260213_003_snapshot_policy_attendance_homework_v1

## 메타

- status: applied
- owner: manager-app
- related_files:
  - `docs/assessment/scoring.md`
  - `docs/assessment/scoring_snapshot_policy.md`
  - `docs/assessment/README.md`

## 변경 목적

- 문제 분석을 후순위로 두고, 출석/과제 스냅샷 운영 기준을 먼저 확정한다.
- 학생 레벨 입력 상태를 스냅샷 참여 조건으로 명시해 비교 해석의 품질을 높인다.

## 변경 전

- 출석/과제 스냅샷 주기가 분리 정의되지 않았다.
- 레벨 미입력 학생 처리(스냅샷 제외 vs 포함)가 문서 기준으로 고정되어 있지 않았다.

## 변경 후

### 정책 핵심

- 대상: 출석 점수, 과제 점수
- 문제 단위 분석/모델링: 후순위(최종 단계)
- 참여 조건: `현재 등급 + 예상 등급` 유효
- 제외 조건: 레벨 미입력 학생
- 제외 학생 처리: 실시간 현재 상태만 표시

### 권장 주기

- 출석 스냅샷: `학생-수업일` 단위 1회 upsert + 주간 마감 스냅샷
- 과제 스냅샷: `학생-일` 단위 1회 upsert + 주간 마감 스냅샷

### 선택 근거

- 학생 규모: 약 80명
- 출석 이벤트: 약 160건/주(80명 × 주2회)
- 과제 원시 이벤트: 약 640~800건/주(80명 × 주2회 × 4~5개)
- 결론: 과제는 이벤트 단위 저장보다 일단위 집계 스냅샷이 노이즈/쓰기량 측면에서 유리

## 영향 범위

- 코드 변경 없음 (문서 정책 확정 단계)
- 이후 구현 시 출석/과제 스냅샷 생성기 설계의 기준 문서로 사용

## 구현 훅 참고(차기 단계)

- 출석 저장 경로: `attendance_service.dart` 출석 add/update/saveOrUpdate 흐름
- 과제 저장 경로:
  - `homework_assignment_store.dart` 검사/상태 저장 흐름
  - `homework_store.dart` 완료 처리 흐름

## 검증 체크리스트

- [x] 출석/과제 스냅샷 주기 분리 기준 문서화
- [x] 레벨 미입력 학생 제외 규칙 명시
- [x] 문제 분석 후순위 경계 명시
- [x] 볼륨 추정 근거(80명/주2회/과제4~5개) 반영

## 롤백 기준

- 운영팀이 단일 주기 정책으로 통합이 더 낫다고 판단하는 경우 롤백 가능
- 롤백 시:
  - 본 문서 status를 `rolled_back`으로 변경
  - `scoring_snapshot_policy.md` 주기 분리 항목 재작성
